
## âœ… 5.1 Managing Complex Function Signatures

---

### 1. ì´ ì¥ì€

- ë‹¤ì–‘í•œ ì…ë ¥ íƒ€ì…ì— ë”°ë¼ **ë‹¤ë¥¸ ì¶œë ¥ íƒ€ì…ì„ ê°–ëŠ” í•¨ìˆ˜**ë¥¼ êµ¬í˜„í•  ë•Œ,
- **function overload** ë°©ì‹ì´ ì ì  ë³µì¡í•´ì§€ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê³ ì,
- **Conditional Types**ë¥¼ í™œìš©í•˜ì—¬ **ì…ë ¥-ì¶œë ¥ íƒ€ì… ê´€ê³„ë¥¼ ì¼ë°˜í™”**í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.

---

### 2. ìš°ë¦¬ê°€ ë‹¤ë£¨ëŠ” ëŒ€ìƒ

```ts
type StringLabel = { name: string };
type NumberLabel = { id: number };
```

```ts
function createLabel(input: number | string): NumberLabel | StringLabel
```

- ì‚¬ìš©ìê°€ ë„˜ê¸´ ê°’ì´ `number`ì´ë©´ `NumberLabel`,  
  `string`ì´ë©´ `StringLabel`ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.

---

### 3. ë¬¸ì œ ìƒí™©

#### ì´ˆê¸° êµ¬í˜„:

```ts
function createLabel(input: number | string): NumberLabel | StringLabel {
  if (typeof input === "number") {
    return { id: input };
  } else {
    return { name: input };
  }
}
```

- ì´ êµ¬í˜„ì€ ë™ì‘í•˜ì§€ë§Œ, `createLabel(42)` í˜¸ì¶œ ì‹œì—ë„ ë°˜í™˜ íƒ€ì…ì€ `NumberLabel | StringLabel`ë¡œ **ë„ˆë¬´ ë„“ê²Œ ì¶”ë¡ **ë©ë‹ˆë‹¤.

#### function overload ë°©ì‹ ë„ì…:

```ts
function createLabel(input: number): NumberLabel;
function createLabel(input: string): StringLabel;
function createLabel(input: number | string): NumberLabel | StringLabel {
  ...
}
```

- ì‚¬ìš©ìê°€ ì–´ë–¤ íƒ€ì…ì„ ì…ë ¥í–ˆëŠ”ì§€ì— ë”°ë¼ ì˜¬ë°”ë¥¸ ë°˜í™˜ íƒ€ì…ì„ ì¶”ë¡ í•  ìˆ˜ ìˆìŒ

---

### 4. overloadì˜ í™•ì¥ í•œê³„

- ì…ë ¥ íƒ€ì…ì´ `number | string` ë¿ ì•„ë‹ˆë¼ ê¸°ì¡´ ë¼ë²¨ ê°ì²´ (`NumberLabel`, `StringLabel`)ë„ í—ˆìš©í•˜ë ¤ê³  í•˜ë©´ ì˜¤ë²„ë¡œë“œê°€ **í­ë°œ**í•©ë‹ˆë‹¤.

```ts
function createLabel(input: number): NumberLabel;
function createLabel(input: string): StringLabel;
function createLabel(input: NumberLabel): NumberLabel;
function createLabel(input: StringLabel): StringLabel;
function createLabel(input: string | StringLabel): StringLabel;
function createLabel(input: number | NumberLabel): NumberLabel;
function createLabel(input: number | string | NumberLabel | StringLabel): ...;
```

- ë‹¨ìˆœí•œ ê¸°ëŠ¥ì— ë¹„í•´ ì˜¤ë²„ë¡œë“œ ì„ ì–¸ì´ ë§ì•„ì§€ê³  **ìœ ì§€ë³´ìˆ˜ê°€ ë§¤ìš° ì–´ë ¤ì›Œì§**

---

### 5. í•´ê²° ì „ëµ: Conditional Typeìœ¼ë¡œ í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ ë‹¨ìˆœí™”

#### 1) ì¡°ê±´ë¶€ íƒ€ì… ë„ì…

```ts
type GetLabel<T> =
  T extends string | StringLabel ? StringLabel :
  T extends number | NumberLabel ? NumberLabel :
  never;
```

â†’ ì…ë ¥ íƒ€ì… Tê°€ `string` ë˜ëŠ” `StringLabel`ì´ë©´ `StringLabel` ë°˜í™˜  
â†’ `number` ë˜ëŠ” `NumberLabel`ì´ë©´ `NumberLabel` ë°˜í™˜

---

#### 2) ì œë„¤ë¦­ í•¨ìˆ˜ë¡œ ì¼ë°˜í™”

```ts
function createLabel<T extends string | number | StringLabel | NumberLabel>(
  input: T
): GetLabel<T> {
  if (typeof input === "number") {
    return { id: input } as GetLabel<T>;
  } else if (typeof input === "string") {
    return { name: input } as GetLabel<T>;
  } else if ("id" in input) {
    return { id: input.id } as GetLabel<T>;
  } else {
    return { name: input.name } as GetLabel<T>;
  }
}
```

- ì´ì œ ì–´ë–¤ ê°’ì„ ë„£ì–´ë„ ì˜¬ë°”ë¥¸ íƒ€ì…ì„ **ìë™ ì¶”ë¡ **í•  ìˆ˜ ìˆìŒ
- ë‹¨, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ì œë„¤ë¦­ê³¼ ì¡°ê±´ë¶€ íƒ€ì…ìœ¼ë¡œ ì œì–´ íë¦„ ë¶„ì„ì„ ëª» í•˜ë¯€ë¡œ **íƒ€ì… ë‹¨ì–¸ (`as`)**ì´ í•„ìš”

---

#### 3) ì™¸ë¶€ ì‹œê·¸ë‹ˆì²˜ + ë‚´ë¶€ êµ¬í˜„ ë°©ì‹ ë¶„ë¦¬

```ts
function createLabel<T extends string | number | StringLabel | NumberLabel>(
  input: T
): GetLabel<T>;

function createLabel(
  input: string | number | StringLabel | NumberLabel
): StringLabel | NumberLabel {
  if (typeof input === "number") {
    return { id: input };
  } else if (typeof input === "string") {
    return { name: input };
  } else if ("id" in input) {
    return { id: input.id };
  } else {
    return { name: input.name };
  }
}
```

- ë‚´ë¶€ëŠ” ì¼ë°˜ íƒ€ì…ìœ¼ë¡œ êµ¬í˜„
- ì™¸ë¶€ì—ëŠ” **ì¡°ê±´ë¶€ íƒ€ì… ê¸°ë°˜ì˜ ì‹œê·¸ë‹ˆì²˜**ë§Œ ë…¸ì¶œ

---

### 6. í•µì‹¬ ê°œë… ìš”ì•½

| ê°œë… | ì„¤ëª… |
|------|------|
| Function Overloads | ê° ì…ë ¥ íƒ€ì…ì— ë”°ë¥¸ ë°˜í™˜ íƒ€ì… ëª…ì‹œ ê°€ëŠ¥í•˜ì§€ë§Œ, ì„ ì–¸ì´ ë§ì•„ì§€ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ì›€ |
| Conditional Types | ì¡°ê±´ì— ë”°ë¼ íƒ€ì…ì„ ë¶„ê¸°í•˜ì—¬ ì„ ì–¸ì„ ì¤„ì´ê³  ì¶”ë¡  ìë™í™” ê°€ëŠ¥ |
| ì œë„¤ë¦­ + ì¡°ê±´ë¶€ íƒ€ì… | íƒ€ì… ê´€ê³„ë¥¼ ê³µì‹í™”í•˜ì—¬ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ êµ¬í˜„ |
| íƒ€ì… ë‹¨ì–¸ (`as`) | íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ íë¦„ ë¶„ì„ì„ ëª»í•  ë•Œ í•„ìš”í•œ ìµœì†Œí•œì˜ ë³´ì • |
| ì‹œê·¸ë‹ˆì²˜ ë¶„ë¦¬ | ì„ ì–¸ë¶€ì™€ êµ¬í˜„ë¶€ë¥¼ ë‚˜ëˆ  ì™¸ë¶€ ì¶”ë¡ ì€ ìœ ì§€í•˜ê³  ë‚´ë¶€ëŠ” ìœ ì—°í•˜ê²Œ êµ¬ì„± ê°€ëŠ¥ |

---

### 7. ê²°ë¡ 

- ì˜¤ë²„ë¡œë“œë¥¼ ì“°ë©´ íƒ€ì…ì€ ëª…í™•í•´ì§€ì§€ë§Œ, ì„ ì–¸ì´ ê³¼ë„í•˜ê²Œ ëŠ˜ì–´ë‚©ë‹ˆë‹¤.
- Conditional Typesë¥¼ í™œìš©í•˜ë©´ ì½”ë“œê°€ ê°„ê²°í•˜ê³  ì¶”ë¡ ë„ ì •í™•í•´ì§‘ë‹ˆë‹¤.
- í•˜ì§€ë§Œ ì œì•½ë„ ìˆìœ¼ë¯€ë¡œ, ìƒí™©ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ í˜¼í•©í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

---


## 5.2 neverë¡œ ê±°ë¥´ê¸°


- Distributive Conditional Typeìœ¼ë¡œ íŠ¹ì • ì†ì„± í•„í„°ë§í•˜ê¸°
---
1. ë¬¸ì œ ìƒí™©: ì•ˆì „í•˜ì§€ ì•Šì€ ì¸ë±ìŠ¤ ì ‘ê·¼
   ë ˆê±°ì‹œ ì½”ë“œì—ì„œ jQuery ê°™ì€ ìœ í‹¸ë¦¬í‹°ë¥¼ í‰ë‚´ ë‚¸ ElementListë¼ëŠ” íƒ€ì…ì´ ìˆìŒ.

ì´ íƒ€ì…ì€ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜ë¨:

```typescript
type ElementList = {
  addClass: (className: string) => ElementList; 
  removeClass: (className: string) => ElementList;
  on: (event: string, callback: (ev: Event) => void) => ElementList;
  length: number;
  [x: number]: HTMLElement; // ìˆ«ì ì¸ë±ìŠ¤ë¡œ HTMLElementì— ì ‘ê·¼ ê°€ëŠ¥
};
```
ì´ íƒ€ì…ì€ ì™œ ì´ë ‡ê²Œ ìƒê²¼ì„ê¹Œ?
HTMLElement DOM ìš”ì†Œì˜ ë¦¬ìŠ¤íŠ¸ ê°™ì€ ê²ƒ

addClass / removeClass / on ê°™ì€ jQuery-style API ì œê³µ
addClassë‚˜ on ê°™ì€ ë©”ì„œë“œëŠ” ë©”ì„œë“œ ì²´ì´ë‹ì´ ê°€ëŠ¥í•˜ë„ë¡ thisë¥¼ ë°˜í™˜í•¨.

ë™ì‹œì— [x: number]: HTMLElementë¡œ ì¸ë±ìŠ¤ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ í•¨
â†’ collection[0] ê°™ì€ ë°©ì‹ìœ¼ë¡œ DOMì— ì§ì ‘ ì ‘ê·¼ ê°€ëŠ¥

ê·¸ëŸ°ë° ì´ê²Œ ë¬¸ì œê°€ ë˜ëŠ” ì´ìœ ëŠ”?
```typescript
myCollection[0].classList.toggle("toggle-on");
```
- ì´ë ‡ê²Œ ì§ì ‘ ì ‘ê·¼í•˜ë©´ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ê´€ë¦¬ë˜ì§€ ì•ŠëŠ” ë°©ì‹ìœ¼ë¡œ ìš”ì†Œê°€ ë³€ê²½ë  ìˆ˜ ìˆìŒ
ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€, ì¶”ì  ë¶ˆê°€ëŠ¥í•œ ìƒíƒœ ë³€ê²½ ë°œìƒ

- í•´ê²°ëª©í‘œ 
  - ëŸ°íƒ€ì„ì—ì„œëŠ” collection[0] ê°™ì€ ì§ì ‘ ì ‘ê·¼ì„ ë§‰ê³  ì‹¶ë‹¤ 
  - íƒ€ì… ìˆ˜ì¤€ì—ì„œë„ [0] ê°™ì€ ì¸ë±ìŠ¤ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ì§€ ì•Šê²Œ ë§Œë“¤ê³  ì‹¶ë‹¤


---
2. ëŸ°íƒ€ì„ í•´ê²°: JavaScriptì˜ Proxy ì‚¬ìš©í•˜ì—¬ ì§ì ‘ ì ‘ê·¼ ì œí•œ
- Proxy ê°ì²´ë¥¼ ì‚¬ìš©í•´ ìˆ«ì ì¸ë±ìŠ¤ë¡œ ì ‘ê·¼í•˜ëŠ” ê²ƒì„ ì œí•œí•˜ê³ ì í•¨.
- ì•„ë˜ëŠ” ë¬¸ìì—´ í‚¤ë§Œ í—ˆìš©í•˜ê³ , ìˆ«ì ë¬¸ìì—´(ì˜ˆ: "0", "1")ì€ ì°¨ë‹¨í•˜ëŠ” Proxy ì˜ˆì‹œ:
```typescript
const safeAccessCollection = new Proxy(myCollection, {
  get(target, property) {
    if (
      typeof property === "string" &&
      property in target &&
      "" + parseInt(property) !== property // ìˆ«ì ë¬¸ìì—´ì€ ì œì™¸
    ) {
      return target[property as keyof typeof target];
    }
    return undefined;
  },
});
```
- "" + parseInt(property) !== property
   - property = "0"ì´ë©´ â†’ parseInt("0") = 0 â†’ "" + 0 = "0" â†’ ê°™ìœ¼ë‹ˆê¹Œ false â†’ ë§‰ìŒ
   - property = "addClass"ì´ë©´ â†’ parseInt("addClass") = NaN â†’ "" + NaN = "NaN" â†’ ë‹¤ë¥´ë‹ˆê¹Œ true â†’ í†µê³¼

- ì¦‰, ìˆ«ìì²˜ëŸ¼ ë³´ì´ëŠ” ë¬¸ìì—´(ì˜ˆ: "0", "1", "2" ë“±) ì€ ì°¨ë‹¨í•˜ê³  
  ì¼ë°˜ ë¬¸ìì—´(ì˜ˆ: "addClass", "length") ëŠ” í—ˆìš©í•˜ëŠ” êµ¬ì¡°ì„.

- ëŸ°íƒ€ì„ì—ì„œëŠ” ì™„ë²½íˆ [0] ì ‘ê·¼ ì°¨ë‹¨ë¨

ì°¸ê³ : Proxyì—ì„œëŠ” ìˆ«ì ì¸ë±ìŠ¤ë„ ë¬¸ìì—´ë¡œ ë³€í™˜ë¨. safeAccessCollection[0] â†’ "0"ìœ¼ë¡œ ì²˜ë¦¬ë¨.

---
#### 3. ë¬¸ì œì : íƒ€ì…ì´ ì—¬ì „íˆ ì•ˆì „í•˜ì§€ ì•ŠìŒ
   íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” safeAccessCollectionì„ ì—¬ì „íˆ ElementListë¡œ ê°„ì£¼í•´ì„œ, ë‹¤ìŒì´ íƒ€ì… ê²€ì‚¬ì—ì„œ í—ˆìš©ë¨:
   
```typescript
safeAccessCollection[0].classList.toggle("toggle-on"); // âŒ JSì—ì„œëŠ” ë§‰íˆì§€ë§Œ TSì—ì„œëŠ” í†µê³¼

```
- ì—¬ì „íˆ [0] ì ‘ê·¼ì„ í—ˆìš©í•¨
  - íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ì—¬ì „íˆ safeAccessCollectionì˜ íƒ€ì…ì„ ElementListë¡œ ë³´ê³  ìˆìŒ
  - ElementListëŠ” ì—¬ì „íˆ [x: number]: HTMLElement ë¥¼ í¬í•¨í•¨
  
- ì´ê±¸ ì‹¤í–‰í•˜ë©´ JSì—ì„œ ë‚´ë¶€ì ìœ¼ë¡œëŠ” ì´ë ‡ê²Œ ë™ì‘í•¨:

  - safeAccessCollection[0] â†’ ì‹¤ì œë¡œëŠ” safeAccessCollection.get("0") í˜¸ì¶œ
  "0"ì€ ìˆ«ì ë¬¸ìì—´ì´ë¯€ë¡œ ìœ„ ì¡°ê±´ì— ê±¸ë ¤ undefined ë°˜í™˜
  undefined.classList.toggle(...) â†’ âŒ ëŸ°íƒ€ì„ ì—ëŸ¬ ë°œìƒ
  ì¦‰, ì‹¤í–‰í•˜ë©´ ë°”ë¡œ ì£½ì–´ë²„ë¦¬ëŠ” ì½”ë“œê°€ ë¨.
  (ts ì»´íŒŒì¼ì‹œ í†µê³¼, ì‹¤í–‰ì‹œ js ì—ëŸ¬)

---
#### 4. ëª©í‘œ: ìˆ«ì ì¸ë±ìŠ¤ê°€ ì œê±°ëœ íƒ€ì… ì •ì˜
   keyof ElementListëŠ” ë‹¤ìŒê³¼ ê°™ì´ í•´ì„ë¨:

```typescript
type ElementListKeys = keyof ElementList;
// => "addClass" | "removeClass" | "on" | "length" | number
```
ì—¬ê¸°ì„œ numberë¥¼ ì œì™¸í•˜ê³  ë¬¸ìì—´ë§Œ ê°€ì ¸ì˜¤ê³  ì‹¶ìŒ.
---
#### 5. í•µì‹¬ ê¸°ìˆ : ë¶„ì‚° ì¡°ê±´ë¶€ íƒ€ì… ì •ì˜
 ```typescript
type JustStrings<T> = T extends string ? T : never;
```
- ì´ê±´ ìœ ë‹ˆì–¸ íƒ€ì…ì— ì¡°ê±´ì„ ì ìš©í•´ì„œ ê° ë©¤ë²„ë¥¼ ê°œë³„ì ìœ¼ë¡œ í‰ê°€í•˜ê²Œ ë§Œë“¦.
- JustStrings<keyof ElementList>ì˜ ê²°ê³¼:
```typescript
type JustElementListStrings =
  | "addClass"
  | "removeClass"
  | "on"
  | "length"
  | never  // numberëŠ” stringì´ ì•„ë‹ˆë¯€ë¡œ neverë¨ â†’ ì‚¬ë¼ì§

```
#### 6. ì•ˆì „í•œ íƒ€ì… ë§Œë“¤ê¸° : Pickì‚¬ìš©
- ìœ„ì—ì„œ êµ¬í•œ ë¬¸ìì—´ í‚¤ë§Œì„ Pickí•´ì„œ ìƒˆ íƒ€ì…ì„ ë§Œë“¤ë©´, ìˆ«ì ì¸ë±ìŠ¤ë¥¼ ì œê±°í•œ ì•ˆì „í•œ íƒ€ì…ì´ ë¨:
```typescript
type SafeAccess = Pick<ElementList, JustStrings<keyof ElementList>>;

```
- ê²°ê³¼ íƒ€ì…ì€ ë‹¤ìŒê³¼ ê°™ìŒ:
```typescript
type SafeAccess = {
  addClass: (className: string) => ElementList;
  removeClass: (className: string) => ElementList;
  on: (event: string, callback: (ev: Event) => void) => ElementList;
  length: number;
};

```
#### 7. íƒ€ì… ì ìš©í•˜ê¸°
   ìœ„ íƒ€ì…ì„ safeAccessCollectionì— ëª…ì‹œì ìœ¼ë¡œ ì ìš©í•˜ë©´, ìˆ«ì ì¸ë±ìŠ¤ ì ‘ê·¼ì´ íƒ€ì… ì°¨ì›ì—ì„œ ë§‰í˜:
```typescript
const safeAccessCollection: Pick<
  ElementList,
  JustStrings<keyof ElementList>
> = new Proxy(myCollection, {
  get(target, property) {
    if (
      typeof property === "string" &&
      property in target &&
      "" + parseInt(property) !== property
    ) {
      return target[property as keyof typeof target];
    }
    return undefined;
  },
});

```


#### 8. íƒ€ì… ì•ˆì „ì„± í™•ì¸

```ts
safeAccessCollection[1].classList.toggle("toggle-on");
// ğŸ”¥ ì˜¤ë¥˜ ë°œìƒ: '1'ì€ ë” ì´ìƒ ì´ íƒ€ì…ì˜ ìœ íš¨í•œ í‚¤ê°€ ì•„ë‹˜
```

- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ì´ì œ `safeAccessCollection`ì—ì„œ ìˆ«ì ì¸ë±ìŠ¤ ì ‘ê·¼ì„ í—ˆìš©í•˜ì§€ ì•ŠìŒ.
- ëª©ì  ë‹¬ì„±!

---

### ğŸ’¡ ìš”ì•½

| ê°œë… | ì„¤ëª… |
|------|------|
| `keyof T` | ê°ì²´ íƒ€ì…ì˜ ëª¨ë“  í‚¤ë¥¼ ìœ ë‹ˆì–¸ìœ¼ë¡œ ë°˜í™˜ |
| ì¡°ê±´ë¶€ íƒ€ì… `T extends string ? T : never` | ìœ ë‹ˆì–¸ì˜ ê° ë©¤ë²„ì— ì¡°ê±´ì„ ê°œë³„ ì ìš©í•¨ (ë¶„ì‚° ì¡°ê±´ë¶€ íƒ€ì…) |
| `Pick<T, K>` | T íƒ€ì…ì—ì„œ K í‚¤ë§Œ ì¶”ì¶œ |
| Proxy + íƒ€ì… ì¬ì •ì˜ | ëŸ°íƒ€ì„ ì ‘ê·¼ ì œí•œ + íƒ€ì… ì•ˆì „ì„± ê°•í™” |

---


## 5.3 kindë¡œ ìš”ì†Œ ê·¸ë£¹í™”í•˜ê¸° 
Grouping Elements by Kind
Distributive Conditional Types to Group Union Members
### **"ìœ ë‹ˆì–¸ íƒ€ì…ì„ ì¡°ê±´ë³„ë¡œ ë‚˜ëˆ„ê¸°"**

---

### ğŸ¯ ìš°ë¦¬ê°€ ë‹¤ë£¨ëŠ” ëŒ€ìƒ

- ìœ ë‹ˆì–¸ íƒ€ì… ë‚´ë¶€ì˜ ê° ë©¤ë²„ì— **ì¡°ê±´ì„ ê±¸ì–´ ê±¸ëŸ¬ë‚´ê±°ë‚˜**,
- **íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ë©¤ë²„ë§Œ ë”°ë¡œ ë¶„ë¦¬í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ë²•**

---

### ğŸ§­ ì´ ì¥ì€...

- **ì¡°ê±´ë¶€ íƒ€ì…**ê³¼ **ë¶„ì‚° ì¡°ê±´ë¶€ íƒ€ì…**ì„ ì‚¬ìš©í•´ì„œ
- **íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” íƒ€ì…ë§Œ ë½‘ê±°ë‚˜ ì œì™¸í•˜ëŠ” ë°©ë²•**ì„ ë³´ì—¬ì¤˜.
- ì˜ˆì œë¥¼ í†µí•´ `"kind"` ì†ì„±ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ íƒ€ì…ì„ ë¶„ë¦¬í•˜ëŠ” íë¦„ì„ ì„¤ëª…í•¨.

---

### ğŸ§± ì˜ˆì œ: Notification íƒ€ì… ìœ ë‹ˆì–¸

```ts
type Notification =
  | { kind: "email"; emailAddress: string }
  | { kind: "sms"; phoneNumber: string }
  | { kind: "push"; deviceToken: string };
```

ì´ ìœ ë‹ˆì–¸ íƒ€ì…ì—ì„œ `"kind"`ì— ë”°ë¼ ë¶„ë¦¬í•˜ê³  ì‹¶ì–´.

---

### ğŸ¯ ëª©í‘œ

- `"kind"ê°€ "email"`ì¸ íƒ€ì…ë§Œ ë½‘ê³  ì‹¶ë‹¤ â†’ `EmailNotification`
- `"kind"ê°€ "sms"`ì¸ íƒ€ì…ë§Œ ë½‘ê³  ì‹¶ë‹¤ â†’ `SMSNotification`

---

### âœ… ë°©ë²•: Distributive Conditional Type ì‚¬ìš©

```ts
type ExtractByKind<T, K> = T extends { kind: K } ? T : never;
```

ì´ íƒ€ì…ì€ **Tê°€ ìœ ë‹ˆì–¸ì´ë©´ ë¶„ì‚°(distributed)** ë˜ì–´ì„œ **ê° ë©¤ë²„ì— ëŒ€í•´ ì¡°ê±´ í‰ê°€**ê°€ ì ìš©ë¨.

---

### ğŸ“Œ ì˜ˆì œ ì ìš©

```ts
type EmailNotification = ExtractByKind<Notification, "email">;
// ê²°ê³¼:
type EmailNotification = { kind: "email"; emailAddress: string };

type SMSNotification = ExtractByKind<Notification, "sms">;
// ê²°ê³¼:
type SMSNotification = { kind: "sms"; phoneNumber: string };
```

---

### ğŸ§  ì–´ë–»ê²Œ ì‘ë™í•˜ëƒë©´?

`ExtractByKind<Notification, "email">`ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ì´ë ‡ê²Œ ì²˜ë¦¬ë¼:

```ts
// ìœ ë‹ˆì–¸ ê° ìš”ì†Œì— ëŒ€í•´ ì¡°ê±´ì„ ë‚˜ëˆ ì„œ í‰ê°€:

// { kind: "email"; emailAddress: string }  â†’ kind: "email" â†’ âœ… â†’ ìœ ì§€
// { kind: "sms"; phoneNumber: string }     â†’ kind: "sms"   â†’ âŒ â†’ never
// { kind: "push"; deviceToken: string }    â†’ kind: "push"  â†’ âŒ â†’ never

// ê²°ê³¼:
type Result = 
  | { kind: "email"; emailAddress: string }
  | never
  | never
â†’ ê²°êµ­:
type Result = { kind: "email"; emailAddress: string }
```

---

### ğŸš€ í™œìš© ì˜ˆì‹œ

```ts
function send(notification: Notification) {
  if (notification.kind === "email") {
    sendEmail(notification); // íƒ€ì… ì¶”ë¡ ì´ ì• ë§¤í•¨
  }
}
```

ì´ëŸ° ê²½ìš° ëª…í™•í•œ íƒ€ì… ë‹¨ì–¸ ì—†ì´ ì“¸ ìˆ˜ ìˆë„ë¡  
**`ExtractByKind`ë¥¼ í™œìš©í•´ì„œ ì˜¤ë²„ë¡œë“œ í•¨ìˆ˜ì— ì ìš©**í•  ìˆ˜ ìˆì–´.

---

### âœ… ì¶”ê°€: ê¸°ë³¸ ì œê³µ `Extract<T, U>`ë„ ë™ì¼í•œ ê¸°ëŠ¥

ì‹¤ì œë¡œ ìœ„ì—ì„œ ë§Œë“  `ExtractByKind`ëŠ” **íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ë‚´ì¥ `Extract<>`**ë¥¼ ì´ìš©í•´ ë” ê°„ë‹¨íˆ ì“¸ ìˆ˜ë„ ìˆìŒ:

```ts
type EmailNotification = Extract<Notification, { kind: "email" }>;
type PushNotification = Extract<Notification, { kind: "push" }>;
```

ë‚´ì¥ `Extract<T, U>`ëŠ”  
â†’ "`T`ì˜ ë©¤ë²„ ì¤‘ `U`ì™€ í• ë‹¹ ê°€ëŠ¥í•œ ê²ƒë§Œ ë‚¨ê²¨ì¤˜"ë¼ëŠ” ì˜ë¯¸ì•¼.

---

### ğŸ”š ì •ë¦¬ ìš”ì•½

| ê¸°ìˆ  | ì„¤ëª… |
|------|------|
| `T extends { kind: K } ? T : never` | ìœ ë‹ˆì–¸ íƒ€ì…ì˜ ê° ë©¤ë²„ì—ì„œ `kind`ê°€ `K`ì¸ ê²ƒë§Œ ì¶”ì¶œ |
| ë¶„ì‚° ì¡°ê±´ë¶€ íƒ€ì… | ìœ ë‹ˆì–¸ ë‚´ë¶€ì—ì„œ ì¡°ê±´ë³„ë¡œ íƒ€ì… ë¶„ë¦¬ ê°€ëŠ¥ |
| ë‚´ì¥ `Extract<T, U>` | ê°™ì€ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ê¸°ë³¸ ìœ í‹¸ë¦¬í‹° íƒ€ì… |

---

### â˜‘ï¸ ì–¸ì œ ì“°ë‚˜?

- API ì‘ë‹µ íƒ€ì…ì—ì„œ íŠ¹ì • ë¶„ê¸°ë³„ êµ¬ì¡°ë¥¼ ë½‘ê³  ì‹¶ì„ ë•Œ
- `kind`, `type`, `variant` í•„ë“œë¡œ êµ¬ë¶„ëœ êµ¬ì¡°ì—ì„œ íƒ€ì… ì•ˆì „í•˜ê²Œ ë¶„ë¦¬í•  ë•Œ
- ì˜¤ë²„ë¡œë“œ í•¨ìˆ˜ë‚˜ ì¡°ê±´ ë¶„ê¸°ì— ë”°ë¼ ë‹¤ë¥¸ ë™ì‘ì´ í•„ìš”í•œ ìƒí™©

## 5.4 íŠ¹ì • ê°ì²´ í”„ë¡œí¼í‹° ì‚­ì œí•˜ê¸°

---

### 1. ì´ ì¥ì€

- ê°ì²´ íƒ€ì…ì—ì„œ íŠ¹ì • **íƒ€ì…ì˜ í”„ë¡œí¼í‹°ë§Œ ì¶”ì¶œí•˜ê±°ë‚˜ ì œê±°**í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë£¹ë‹ˆë‹¤.
- `Pick<T, K>`ì´ë‚˜ `Omit<T, K>` ê°™ì€ ê¸°ë³¸ ì œê³µ ìœ í‹¸ë¦¬í‹°ë¥¼ ë„˜ì–´ì„œ,
- **ì†ì„± ì´ë¦„ì´ ì•„ë‹ˆë¼ ì†ì„±ì˜ íƒ€ì… ê¸°ì¤€ìœ¼ë¡œ** ê°ì²´ í”„ë¡œí¼í‹°ë¥¼ ì„ íƒí•˜ê±°ë‚˜ ì œì™¸í•˜ëŠ” **ì»¤ìŠ¤í…€ ìœ í‹¸ë¦¬í‹° íƒ€ì…**ì„ ë§Œë“œëŠ” ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

---

### 2. ìš°ë¦¬ê°€ ë‹¤ë£¨ëŠ” ëŒ€ìƒ

```ts
type Person = {
  name: string;
  age: number;
  profession?: string;
};
```

- ì´ ê°ì²´ì—ì„œ ì˜ˆë¥¼ ë“¤ì–´ ë¬¸ìì—´(string) íƒ€ì… í”„ë¡œí¼í‹°ë§Œ ê³¨ë¼ì„œ ìƒˆ íƒ€ì…ì„ ë§Œë“¤ê³ ì í•¨.

---

### 3. ë¬¸ì œ ìƒí™©

#### ê¸°ì¡´ì˜ `Pick` ì‚¬ìš© ë°©ì‹:

```ts
type PersonStrings = Pick<Person, "name" | "profession">;
```

- ì›í•˜ëŠ” ê²°ê³¼ëŠ” ì–»ì„ ìˆ˜ ìˆì§€ë§Œ, **ì†ì„± ì´ë¦„ì„ ì§ì ‘ ë‚˜ì—´í•´ì•¼ í•¨**
- ì†ì„±ì´ ë§ê±°ë‚˜ ì´ë¦„ì„ ì•Œ ìˆ˜ ì—†ì„ ë• ë¶ˆí¸í•¨

---

### 4. ëª©í‘œ

- ë‹¤ìŒê³¼ ê°™ì´ **íƒ€ì… ê¸°ë°˜ìœ¼ë¡œ ìë™ í•„í„°ë§**ë˜ëŠ” íƒ€ì…ì„ ë§Œë“¤ê³ ì í•¨:

```ts
type PersonStrings = {
  name: string;
  profession?: string;
};
```

---

### 5. ê¸°ë³¸ ìœ í‹¸ë¦¬í‹° íƒ€ì… ë³µìŠµ

#### `Pick<T, K>`ì˜ í˜•íƒœ

```ts
type Pick<T, K extends keyof T> = {
  [P in K]: T[P];
};
```

â†’ ì›í•˜ëŠ” í‚¤ë§Œ ì„ íƒí•´ì„œ ìƒˆë¡œìš´ íƒ€ì… ìƒì„±

#### `Omit<T, K>`ì€ ë‹¤ìŒê³¼ ê°™ìŒ

```ts
type Omit<T, K extends keyof T> = {
  [P in Exclude<keyof T, K>]: T[P];
};
```

â†’ íŠ¹ì • í‚¤ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ë¥¼ ì„ íƒ

---

### 6. íƒ€ì… ê¸°ì¤€ í•„í„°ë§ì„ ìœ„í•œ ì ‘ê·¼ ë°©ì‹

#### ì²˜ìŒ ì‹œë„: ê°’ íƒ€ì… ê¸°ì¤€ìœ¼ë¡œ í•„í„°ë§

```ts
type PersonStrings = {
  [K in keyof Person]: Person[K] extends string ? Person[K] : never;
};
```

â›” ì´ ë°©ë²•ì€ ì›í•˜ëŠ” ì†ì„±ë§Œ ì„ íƒí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼  
ëª¨ë“  ì†ì„±ì„ ìœ ì§€í•˜ë©´ì„œ stringì´ ì•„ë‹Œ ì†ì„±ì„ `never`ë¡œ ë§Œë“¤ê¸° ë•Œë¬¸ì—,  
ì˜ˆìƒê³¼ ë‹¤ë¥´ê²Œ `"age"` ì†ì„±ë„ ì—¬ì „íˆ ë‚¨ì•„ ìˆìŒ.

---

### 7. í•µì‹¬ ì „ëµ: key ìª½ì—ì„œ ì¡°ê±´ ê±¸ê¸° (`as` ì‚¬ìš©)

```ts
type PersonStrings = {
  [K in keyof Person as Person[K] extends string ? K : never]: Person[K];
};
```

- `as` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ì„œ **K ê°’ì„ ì¡°ê±´ì— ë”°ë¼ ìœ ì§€í•˜ê±°ë‚˜ ë²„ë¦¼**
- `Person[K]`ì´ stringì´ë©´ Kë¥¼ ê·¸ëŒ€ë¡œ ìœ ì§€
- ì•„ë‹ˆë©´ `never`ë¡œ ëŒ€ì²´ë˜ì–´ **í•´ë‹¹ í‚¤ê°€ íƒ€ì…ì—ì„œ ì œê±°ë¨**

---

### 8. ì˜µì…”ë„ í”„ë¡œí¼í‹° ì²˜ë¦¬

- `profession?: string` ê°™ì€ ì†ì„±ì€ ì‚¬ì‹¤ìƒ `string | undefined`ë¡œ ì¶”ë¡ ë¨
- ê·¸ë˜ì„œ `undefined`ë„ í¬í•¨ì‹œì¼œì•¼ í•¨

```ts
type PersonStrings = {
  [K in keyof Person as Person[K] extends string | undefined ? K : never]: Person[K];
};
```

---

### 9. ì¼ë°˜í™”: Select ìœ í‹¸ë¦¬í‹° íƒ€ì…

```ts
type Select<O, T> = {
  [K in keyof O as O[K] extends T | undefined ? K : never]: O[K];
};
```

#### ì‚¬ìš© ì˜ˆ:

```ts
type PersonStrings = Select<Person, string>;
type PersonNumbers = Select<Person, number>;
```

â†’ í”„ë¡œí¼í‹°ì˜ **ê°’ íƒ€ì… ê¸°ì¤€ìœ¼ë¡œ í•„í„°ë§ëœ ê°ì²´ íƒ€ì…**ì„ ìƒì„± ê°€ëŠ¥

---

### 10. ë°˜ëŒ€ ê¸°ëŠ¥: íŠ¹ì • íƒ€ì… ì œê±° (`Remove`)

```ts
type Remove<O, T> = {
  [K in keyof O as O[K] extends T | undefined ? never : K]: O[K];
};
```

#### ì‚¬ìš© ì˜ˆ:

```ts
type PersonWithoutStrings = Remove<Person, string>;
```

- ë¬¸ìì—´ íƒ€ì… í”„ë¡œí¼í‹°ë§Œ ì œê±°ë¨ â†’ `age: number`ë§Œ ë‚¨ìŒ

---

### ğŸ” ì •ë¦¬

- TypeScriptì˜ **ì¡°ê±´ë¶€ íƒ€ì… + key remapping (`as`)** ì„ í™œìš©í•˜ë©´
  - **ê°’ íƒ€ì… ê¸°ë°˜ìœ¼ë¡œ ê°ì²´ í•„í„°ë§** ê°€ëŠ¥
- `Select<O, T>`: íŠ¹ì • íƒ€ì…ì˜ í”„ë¡œí¼í‹°ë§Œ ì„ íƒ
- `Remove<O, T>`: íŠ¹ì • íƒ€ì…ì˜ í”„ë¡œí¼í‹°ë§Œ ì œê±°
- ë³µì¡í•œ ìœ í‹¸ë¦¬í‹° íƒ€ì…ì„ ì§ì ‘ ë§Œë“¤ì–´ì•¼ í•  ìƒí™©ì—ì„œ  
  **ê¸°ì¡´ì˜ Pick/Omitì„ í™•ì¥í•´ ì“°ëŠ” ì „ëµ**ìœ¼ë¡œ ìœ ìš©í•˜ê²Œ í™œìš© ê°€ëŠ¥

---
ì¢‹ì€ ì§€ì ì´ì—ìš”. ë§ì”€í•˜ì‹  ëŒ€ë¡œ, ì§€ê¸ˆ ì •ë¦¬ëŠ” ë²ˆí˜¸ê°€ ì¼ê´€ì„± ì—†ì´ í‰í‰í•˜ê²Œ ë‚˜ì—´ë˜ì–´ ìˆì–´ì„œ íë¦„ì´ í—·ê°ˆë¦´ ìˆ˜ ìˆì–´ìš”. ì´ ì¥ì€ **ë‘ ê°€ì§€ ì£¼ìš” ë¶„ê¸°ì **ì´ ìˆê³ , ê·¸ ì•ˆì— ì„¸ë¶€ ëª©í‘œê°€ ë“¤ì–´ìˆê¸° ë•Œë¬¸ì—, 4ì¥ì²˜ëŸ¼ **ê³„ì¸µì ì´ê³  ë…¼ë¦¬ì ì¸ êµ¬ì¡°**ë¡œ ì •ë¦¬í•˜ëŠ” ê²Œ ì ì ˆí•©ë‹ˆë‹¤.

ë°”ë¡œ ê·¸ ìŠ¤íƒ€ì¼ë¡œ ë‹¤ì‹œ ì •ë¦¬í•´ë“œë¦´ê²Œìš”:

---

## 5.5 ì¡°ê±´ì‹ì—ì„œ í˜•ì‹ ì¶”ë¡ í•˜ê¸°

---

### âœ… ìš°ë¦¬ê°€ ë‹¤ë£¨ëŠ” ëŒ€ìƒ

**ê°ì²´ ì§ë ¬í™”**ì—ì„œ ë‹¤ìŒ ë‘ ê°€ì§€ ì¡°ê±´ì„ ì²˜ë¦¬í•˜ëŠ” íƒ€ì… ì‹œìŠ¤í…œ ì„¤ê³„ë¥¼ ë‹¤ë£¹ë‹ˆë‹¤.

1. ê°ì²´ ì•ˆì˜ `í•¨ìˆ˜` íƒ€ì… í”„ë¡œí¼í‹°ëŠ” ì§ë ¬í™” ëŒ€ìƒì—ì„œ ì œì™¸í•˜ê³ ,
2. ê°ì²´ì— `serialize()` ë©”ì„œë“œê°€ ìˆë‹¤ë©´, ê·¸ ë°˜í™˜ ê°’ì„ **ì§ë ¬í™” ê²°ê³¼ íƒ€ì…**ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹.

---

### ğŸ§­ ì´ ì¥ì€

- í•¨ìˆ˜ í”„ë¡œí¼í‹°ë¥¼ ì œê±°í•˜ëŠ” íƒ€ì… ìœ í‹¸ë¦¬í‹°ë¥¼ ë§Œë“¤ê³ ,
- ì¤‘ì²© ê°ì²´ë¥¼ ì¬ê·€ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ë©°,
- `serialize(): R`ì´ ì •ì˜ëœ ê°ì²´ëŠ” í•´ë‹¹ ë°˜í™˜ íƒ€ì…ì„ ê²°ê³¼ íƒ€ì…ìœ¼ë¡œ ìë™ ì¶”ë¡ í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.

---

## 1. ê¸°ë³¸ ì§ë ¬í™”: í•¨ìˆ˜ ì œê±°

### 1.1 Remove ìœ í‹¸ë¦¬í‹° íƒ€ì… ì •ì˜

```ts
type Remove<O, T> = {
  [K in keyof O as O[K] extends T | undefined ? never : K]: O[K];
};
```

- `O`ì˜ í”„ë¡œí¼í‹° ì¤‘ `T` íƒ€ì…(`Function`)ì¸ í‚¤ë¥¼ ì œê±°
- ì˜ˆ: `Remove<Person, Function>` â†’ í•¨ìˆ˜ í”„ë¡œí¼í‹°ê°€ ì œê±°ëœ Person íƒ€ì…

### 1.2 ê°„ë‹¨í•œ ì§ë ¬í™” íƒ€ì…

```ts
type Serialize<T> = Remove<T, Function>;
```

---

## 2. ì¤‘ì²©ëœ ê°ì²´ê¹Œì§€ ì¬ê·€ ì§ë ¬í™”

### 2.1 NestSerialization ìœ í‹¸ë¦¬í‹°

```ts
type NestSerialization<T> = {
  [K in keyof T]: T[K] extends object ? Serialize<T[K]> : T[K];
};
```

- ê° í”„ë¡œí¼í‹°ë¥¼ ê²€ì‚¬:
  - ê°ì²´ë¼ë©´ ì¬ê·€ì ìœ¼ë¡œ `Serialize` ì‹¤í–‰
  - ê°ì²´ê°€ ì•„ë‹ˆë©´ ê·¸ëŒ€ë¡œ ìœ ì§€

### 2.2 ìµœì¢… ì§ë ¬í™” íƒ€ì…

```ts
type Serialize<T> = NestSerialization<Remove<T, Function>>;
```

- `Remove`ë¡œ 1ì°¨ í•¨ìˆ˜ ì œê±° í›„,
- `NestSerialization`ìœ¼ë¡œ ê°ì²´ ë‚´ë¶€ê¹Œì§€ ì¬ê·€ ì§ë ¬í™”

---

## 3. ì§ë ¬í™” ë©”ì„œë“œê°€ ìˆëŠ” ê°ì²´ ì²˜ë¦¬

### 3.1 ë¬¸ì œ ìƒí™©

```ts
type Person = {
  name: string;
  age: number;
  serialize(): string;
};
```

- ì´ ê²½ìš° ë‹¨ìˆœíˆ í•¨ìˆ˜ ì œê±°ë§Œ í•˜ë©´ ì•ˆ ë¨
- `serialize()`ì˜ **ë°˜í™˜ íƒ€ì…ì´ ìµœì¢… ì§ë ¬í™” íƒ€ì…**ì´ ë˜ì–´ì•¼ í•¨

### 3.2 ì¡°ê±´ë¶€ íƒ€ì… + inferë¡œ í•´ê²°

```ts
type Serialize<T> = T extends { serialize(): infer R }
  ? R
  : NestSerialization<Remove<T, Function>>;
```

- `T`ê°€ `serialize()` ë©”ì„œë“œë¥¼ ê°–ê³  ìˆìœ¼ë©´ `infer R`ë¡œ ë°˜í™˜ íƒ€ì… ì¶”ì¶œ
- ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ê¸°ì¡´ ë°©ì‹(`Remove + Nest`)ìœ¼ë¡œ ì§ë ¬í™”

---

## 4. êµ¬í˜„ ì˜ˆì‹œ

```ts
class Serializer {
  serialize<T>(obj: T): Serialize<T> {
    if (
      typeof obj === "object" &&
      obj &&
      "serialize" in obj &&
      typeof obj.serialize === "function"
    ) {
      return obj.serialize(); // ìë™ ì¶”ë¡ ëœ íƒ€ì… R
    }

    const ret: Record<string, any> = {};
    for (let k in obj) {
      if (typeof obj[k] === "object") {
        ret[k] = this.serialize(obj[k]);
      } else if (typeof obj[k] !== "function") {
        ret[k] = obj[k];
      }
    }
    return ret as Serialize<T>;
  }
}
```

---

## 5. ì „ì²´ íë¦„ ì •ë¦¬

| ì²˜ë¦¬ ëŒ€ìƒ                    | ì „ëµ                                                |
|-----------------------------|-----------------------------------------------------|
| í•¨ìˆ˜ í”„ë¡œí¼í‹° ì œê±°          | `Remove<O, Function>`                               |
| ì¤‘ì²© ê°ì²´ ì¬ê·€ ì§ë ¬í™”       | `NestSerialization<T>`                              |
| `serialize()` ì¡´ì¬ ì‹œ ìš°ì„  ì²˜ë¦¬ | ì¡°ê±´ë¶€ íƒ€ì… + `infer` â†’ `T extends { serialize(): R }` |

---
